{"ast":null,"code":"/*\r\njQWidgets v8.3.2 (2019-Oct)\r\nCopyright (c) 2011-2019 jQWidgets.\r\nLicense: https://jqwidgets.com/license/\r\n*/\n\n/* eslint-disable */\n(function (a) {\n  a.jqx.jqxWidget(\"jqxMenu\", \"\", {});\n  a.extend(a.jqx._jqxMenu.prototype, {\n    defineInstance: function () {\n      var b = {\n        items: new Array(),\n        mode: \"horizontal\",\n        width: null,\n        height: null,\n        minimizeWidth: \"auto\",\n        easing: \"easeInOutSine\",\n        animationShowDuration: 200,\n        animationHideDuration: 200,\n        autoCloseInterval: 0,\n        animationHideDelay: 100,\n        animationShowDelay: 10,\n        menuElements: new Array(),\n        autoSizeMainItems: false,\n        autoCloseOnClick: true,\n        autoCloseOnMouseLeave: true,\n        enableRoundedCorners: true,\n        disabled: false,\n        autoOpenPopup: true,\n        enableHover: true,\n        autoOpen: true,\n        autoGenerate: true,\n        clickToOpen: false,\n        showTopLevelArrows: false,\n        touchMode: \"auto\",\n        source: null,\n        popupZIndex: 1000,\n        rtl: false,\n        keyboardNavigation: false,\n        lockFocus: false,\n        title: \"\",\n        events: [\"shown\", \"closed\", \"itemclick\", \"initialized\", \"open\", \"close\"]\n      };\n\n      if (this === a.jqx._jqxMenu.prototype) {\n        return b;\n      }\n\n      a.extend(true, this, b);\n      return b;\n    },\n    createInstance: function (c) {\n      var b = this;\n      this.host.attr(\"role\", \"menubar\");\n      a.jqx.utilities.resize(this.host, function () {\n        b.refresh();\n      }, false, this.mode != \"popup\");\n\n      if (this.minimizeWidth != \"auto\" && this.minimizeWidth != null && this.width && this.width.toString().indexOf(\"%\") == -1) {\n        a(window).resize(function () {\n          b.refresh();\n        });\n      }\n\n      this.host.css(\"outline\", \"none\");\n\n      if (this.source) {\n        if (this.source != null) {\n          var d = this.loadItems(this.source);\n          this.element.innerHTML = d;\n        }\n      }\n\n      this._tmpHTML = this.element.innerHTML;\n\n      if (this.element.innerHTML.indexOf(\"UL\")) {\n        var e = this.host.find(\"ul:first\");\n\n        if (e.length > 0) {\n          this._createMenu(e[0]);\n        }\n      }\n\n      this.host.data(\"autoclose\", {});\n\n      this._render();\n\n      this._setSize();\n\n      if (a.jqx.browser.msie && a.jqx.browser.version < 8) {\n        this.host.attr(\"hideFocus\", true);\n      }\n    },\n    focus: function () {\n      try {\n        if (this.mode === \"popup\" && this.keyboardNavigation) {\n          var d = this.host.closest(\"div.jqx-menu-wrapper\");\n          d.focus();\n        }\n\n        if (this.keyboardNavigation) {\n          this.host.focus();\n          var c = this;\n\n          var e = function () {\n            if (!a.jqx.isHidden(a(c.items[0].element))) {\n              a(c.items[0].element).addClass(c.toThemeProperty(\"jqx-fill-state-focus\"));\n              c.activeItem = c.items[0];\n            } else {\n              var f = c._nextVisibleItem(c.items[0], 0);\n\n              if (f) {\n                a(f.element).addClass(c.toThemeProperty(\"jqx-fill-state-focus\"));\n                c.activeItem = f;\n              }\n            }\n          };\n\n          if (!this.activeItem) {\n            e();\n          } else {\n            if (!a.jqx.isHidden(a(this.activeItem.element))) {\n              a(this.activeItem.element).addClass(this.toThemeProperty(\"jqx-fill-state-focus\"));\n            } else {\n              a(this.activeItem.element).removeClass(this.toThemeProperty(\"jqx-fill-state-focus\"));\n              e();\n            }\n          }\n        }\n      } catch (b) {}\n    },\n    loadItems: function (c, e) {\n      if (c == null) {\n        return;\n      }\n\n      if (c.length == 0) {\n        return \"\";\n      }\n\n      var b = this;\n      this.items = new Array();\n      var d = '<ul class=\"jqx-menu-ul\">';\n\n      if (e) {\n        d = '<ul class=\"jqx-menu-ul\" style=\"width:' + e + ';\">';\n      }\n\n      a.map(c, function (f) {\n        if (f == undefined) {\n          return null;\n        }\n\n        d += b._parseItem(f);\n      });\n      d += \"</ul>\";\n      return d;\n    },\n    _parseItem: function (f) {\n      var c = \"\";\n\n      if (f == undefined) {\n        return null;\n      }\n\n      var b = f.label;\n\n      if (!f.label && f.html) {\n        b = f.html;\n      }\n\n      if (!b) {\n        b = \"Item\";\n      }\n\n      if (typeof f === \"string\") {\n        b = f;\n      }\n\n      var e = false;\n\n      if (f.selected != undefined && f.selected) {\n        e = true;\n      }\n\n      var d = false;\n\n      if (f.disabled != undefined && f.disabled) {\n        d = true;\n      }\n\n      c += \"<li\";\n\n      if (d) {\n        c += ' item-disabled=\"true\" ';\n      }\n\n      if (f.label && !f.html) {\n        c += ' item-label=\"' + b + '\" ';\n      }\n\n      if (f.value != null) {\n        c += ' item-value=\"' + f.value + '\" ';\n      }\n\n      if (f.id != undefined) {\n        c += ' id=\"' + f.id + '\" ';\n      }\n\n      c += \">\" + b;\n\n      if (f.items) {\n        if (f.subMenuWidth) {\n          c += this.loadItems(f.items, f.subMenuWidth);\n        } else {\n          c += this.loadItems(f.items);\n        }\n      }\n\n      c += \"</li>\";\n      return c;\n    },\n    _setSize: function () {\n      if (this.width != null && this.width.toString().indexOf(\"%\") != -1) {\n        this.host.width(this.width);\n      } else {\n        if (this.width != null && this.width.toString().indexOf(\"px\") != -1) {\n          this.host.width(this.width);\n        } else {\n          if (this.width != undefined && !isNaN(this.width)) {\n            this.host.width(this.width);\n          }\n        }\n      }\n\n      if (this.height != null && this.height.toString().indexOf(\"%\") != -1) {\n        this.host.height(this.height);\n      } else {\n        if (this.height != null && this.height.toString().indexOf(\"px\") != -1) {\n          this.host.height(this.height);\n        } else {\n          if (this.height != undefined && !isNaN(this.height)) {\n            this.host.height(this.height);\n          }\n        }\n      }\n\n      if (this.height === null) {\n        this.host.height(\"auto\");\n      }\n\n      var g = this;\n\n      if (this.minimizeWidth != null && this.mode != \"popup\") {\n        var f = a(window).width();\n\n        if (!a.jqx.response) {\n          var e = false;\n\n          if (navigator.userAgent.match(/Windows|Linux|MacOS/)) {\n            var b = navigator.userAgent.indexOf(\"Windows Phone\") >= 0 || navigator.userAgent.indexOf(\"WPDesktop\") >= 0 || navigator.userAgent.indexOf(\"IEMobile\") >= 0 || navigator.userAgent.indexOf(\"ZuneWP7\") >= 0;\n\n            if (!b) {\n              e = true;\n            }\n          }\n\n          var c = this.minimizeWidth;\n\n          if (e && this.minimizeWidth == \"auto\") {\n            return;\n          }\n        }\n\n        if (this.minimizeWidth == \"auto\" && a.jqx.response) {\n          var d = new a.jqx.response();\n\n          if (d.device.type == \"Phone\" || d.device.type == \"Tablet\") {\n            if (!this.minimized) {\n              this.minimize();\n            }\n          }\n        } else {\n          if (f < c && !this.minimized) {\n            this.minimize();\n          } else {\n            if (this.minimized && f >= c) {\n              this.restore();\n            }\n          }\n        }\n      }\n    },\n    minimize: function () {\n      if (this.minimized) {\n        return;\n      }\n\n      var e = this;\n      this.host.addClass(this.toThemeProperty(\"jqx-menu-minimized\"));\n      this.minimized = true;\n      this._tmpMode = this.mode;\n      this.mode = \"simple\";\n      var h = this.host.closest(\"div.jqx-menu-wrapper\");\n      h.remove();\n      a(\"#menuWrapper\" + this.element.id).remove();\n      a.each(this.items, function () {\n        var k = this;\n        var j = a(k.element);\n        var i = a(k.subMenuElement);\n        var l = i.closest(\"div.jqx-menu-popup\");\n        l.remove();\n      });\n\n      if (this.source) {\n        var d = this.loadItems(this.source);\n        this.element.innerHTML = d;\n        this._tmpHTML = this.element.innerHTML;\n      }\n\n      this.element.innerHTML = this._tmpHTML;\n\n      if (this.element.innerHTML.indexOf(\"UL\")) {\n        var g = this.host.find(\"ul:first\");\n\n        if (g.length > 0) {\n          this._createMenu(g[0]);\n        }\n      }\n\n      this._render();\n\n      var c = this.host.find(\"ul:first\");\n      c.wrap('<div class=\"jqx-menu-wrapper\" style=\"z-index:' + this.popupZIndex + '; padding: 0px; display: none; margin: 0px; height: auto; width: auto; position: absolute; top: 0; left: 0; display: block; visibility: visible;\"></div>');\n      var h = c.closest(\"div.jqx-menu-wrapper\");\n      h[0].id = \"menuWrapper\" + this.element.id;\n      h.detach();\n      h.appendTo(a(document.body));\n      h.addClass(this.toThemeProperty(\"jqx-widget\"));\n      h.addClass(this.toThemeProperty(\"jqx-menu\"));\n      h.addClass(this.toThemeProperty(\"jqx-menu-minimized\"));\n      h.addClass(this.toThemeProperty(\"jqx-widget-header\"));\n      c.children().hide();\n      h.hide();\n      h.find(\"ul\").addClass(this.toThemeProperty(\"jqx-menu-ul-minimized\"));\n      this.minimizedItem = a(\"<div></div>\");\n      this.minimizedItem.addClass(this.toThemeProperty(\"jqx-item\"));\n      this.minimizedItem.addClass(this.toThemeProperty(\"jqx-menu-item-top\"));\n      this.addHandler(h, \"keydown\", function (i) {\n        return e.handleKeyDown(i);\n      });\n      this.minimizedItem.addClass(this.toThemeProperty(\"jqx-menu-minimized-button\"));\n      this.minimizedItem.prependTo(this.host);\n      this.titleElement = a(\"<div>\" + this.title + \"</div>\");\n      this.titleElement.addClass(this.toThemeProperty(\"jqx-item\"));\n      this.titleElement.addClass(this.toThemeProperty(\"jqx-menu-title\"));\n      this.titleElement.prependTo(this.host);\n      a(\"<div style='clear:both;'></div>\").insertAfter(this.minimizedItem);\n      e.minimizedHidden = true;\n\n      var b = function (j) {\n        e.minimizedHidden = true;\n        e.minimizedItem.show();\n        var i = false;\n\n        if (e.minimizedItem.css(\"float\") == \"right\") {\n          i = true;\n        }\n\n        h.animate({\n          left: !i ? -h.outerWidth() : e.host.coord().left + e.host.width() + h.width(),\n          opacity: 0\n        }, e.animationHideDuration, function () {\n          h.find(\"ul:first\").children().hide();\n          h.hide();\n        });\n      };\n\n      var f = function (k) {\n        if (e.minimizedHidden) {\n          h.find(\"ul:first\").children().show();\n          e.minimizedHidden = false;\n          h.show();\n          h.css(\"opacity\", 0);\n          h.css(\"left\", -h.outerWidth());\n          var j = false;\n          var i = h.width();\n\n          if (e.minimizedItem.css(\"float\") == \"right\") {\n            h.css(\"left\", e.host.coord().left + e.host.width() + i);\n            j = true;\n          }\n\n          h.css(\"top\", e.host.coord().top + e.host.height());\n          h.animate({\n            left: !j ? e.host.coord().left : e.host.coord().left + e.host.width() - i,\n            opacity: 0.95\n          }, e.animationShowDuration, function () {});\n        } else {\n          b(k);\n        }\n\n        e._raiseEvent(\"2\", {\n          type: \"mouse\",\n          item: e.minimizedItem[0],\n          event: k\n        });\n\n        e._setSize();\n      };\n\n      this.addHandler(a(window), \"orientationchange.jqxmenu\" + this.element.id, function (i) {\n        setTimeout(function () {\n          if (!e.minimizedHidden) {\n            var j = h.width();\n            var k = false;\n            var j = h.width();\n\n            if (e.minimizedItem.css(\"float\") == \"right\") {\n              k = true;\n            }\n\n            h.css(\"top\", e.host.coord().top + e.host.height());\n            h.css({\n              left: !k ? e.host.coord().left : e.host.coord().left + e.host.width() - j\n            });\n          }\n        }, 25);\n      });\n      this.addHandler(this.minimizedItem, \"click\", function (i) {\n        f(i);\n      });\n    },\n    restore: function () {\n      if (!this.minimized) {\n        return;\n      }\n\n      this.host.find(\"ul\").removeClass(this.toThemeProperty(\"jqx-menu-ul-minimized\"));\n      this.host.removeClass(this.toThemeProperty(\"jqx-menu-minimized\"));\n      this.minimized = false;\n      this.mode = this._tmpMode;\n\n      if (this.minimizedItem) {\n        this.minimizedItem.remove();\n      }\n\n      var d = a(\"#menuWrapper\" + this.element.id);\n      d.remove();\n\n      if (this.source) {\n        var b = this.loadItems(this.source);\n        this.element.innerHTML = b;\n        this._tmpHTML = b;\n      }\n\n      this.element.innerHTML = this._tmpHTML;\n\n      if (this.element.innerHTML.indexOf(\"UL\")) {\n        var c = this.host.find(\"ul:first\");\n\n        if (c.length > 0) {\n          this._createMenu(c[0]);\n        }\n      }\n\n      this._setSize();\n\n      this._render();\n    },\n    isTouchDevice: function () {\n      if (this._isTouchDevice != undefined) {\n        return this._isTouchDevice;\n      }\n\n      var b = a.jqx.mobile.isTouchDevice();\n\n      if (this.touchMode == true) {\n        b = true;\n      } else {\n        if (this.touchMode == false) {\n          b = false;\n        }\n      }\n\n      if (b) {\n        this.host.addClass(this.toThemeProperty(\"jqx-touch\"));\n        a(\".jqx-menu-item\").addClass(this.toThemeProperty(\"jqx-touch\"));\n      }\n\n      this._isTouchDevice = b;\n      return b;\n    },\n    refresh: function (b) {\n      if (!b) {\n        this._setSize();\n      }\n    },\n    resize: function (c, b) {\n      this.width = c;\n      this.height = b;\n      this.refresh();\n    },\n    _closeAll: function (f) {\n      var d = f != null ? f.data : this;\n      var b = d.items;\n      a.each(b, function () {\n        var e = this;\n\n        if (e.hasItems == true) {\n          if (e.isOpen) {\n            d._closeItem(d, e);\n          }\n        }\n      });\n\n      if (d.mode == \"popup\") {\n        if (f != null) {\n          var c = d._isRightClick(f);\n\n          if (!c) {\n            d.close();\n          }\n        }\n      }\n    },\n    closeItem: function (e) {\n      if (e == null) {\n        return false;\n      }\n\n      var b = e;\n      var c = document.getElementById(b);\n      var d = this;\n      a.each(d.items, function () {\n        var f = this;\n\n        if (f.isOpen == true && f.element == c) {\n          d._closeItem(d, f);\n\n          if (f.parentId) {}\n        }\n      });\n      return true;\n    },\n    openItem: function (e) {\n      if (e == null) {\n        return false;\n      }\n\n      var b = e;\n      var c = document.getElementById(b);\n      var d = this;\n      a.each(d.items, function () {\n        var f = this;\n\n        if (f.isOpen == false && f.element == c) {\n          d._openItem(d, f);\n\n          if (f.parentId) {\n            d.openItem(f.parentId);\n          }\n        }\n      });\n      return true;\n    },\n    _getClosedSubMenuOffset: function (c) {\n      var b = a(c.subMenuElement);\n      var f = -b.outerHeight();\n      var e = -b.outerWidth();\n      var d = c.level == 0 && this.mode == \"horizontal\";\n\n      if (d) {\n        e = 0;\n      } else {\n        f = 0;\n      }\n\n      switch (c.openVerticalDirection) {\n        case \"up\":\n        case \"center\":\n          f = b.outerHeight();\n          break;\n      }\n\n      switch (c.openHorizontalDirection) {\n        case this._getDir(\"left\"):\n          if (d) {\n            e = 0;\n          } else {\n            e = b.outerWidth();\n          }\n\n          break;\n\n        case \"center\":\n          if (d) {\n            e = 0;\n          } else {\n            e = b.outerWidth();\n          }\n\n          break;\n      }\n\n      return {\n        left: e,\n        top: f\n      };\n    },\n    _closeItem: function (l, o, g, c) {\n      if (l == null || o == null) {\n        return false;\n      }\n\n      var j = a(o.subMenuElement);\n      var b = o.level == 0 && this.mode == \"horizontal\";\n\n      var f = this._getClosedSubMenuOffset(o);\n\n      var m = f.top;\n      var e = f.left;\n      var i = a(o.element);\n      var k = j.closest(\"div.jqx-menu-popup\");\n\n      if (k != null) {\n        var h = l.animationHideDelay;\n\n        if (c == true) {\n          h = 0;\n        }\n\n        if (j.data(\"timer\") && j.data(\"timer\").show != null) {\n          clearTimeout(j.data(\"timer\").show);\n          j.data(\"timer\").show = null;\n        }\n\n        var n = function () {\n          o.isOpen = false;\n\n          if (b) {\n            j.stop().animate({\n              top: m\n            }, l.animationHideDuration, function () {\n              a(o.element).removeClass(l.toThemeProperty(\"jqx-fill-state-pressed\"));\n              a(o.element).removeClass(l.toThemeProperty(\"jqx-menu-item-top-selected\"));\n              a(o.element).removeClass(l.toThemeProperty(\"jqx-rc-b-expanded\"));\n              k.removeClass(l.toThemeProperty(\"jqx-rc-t-expanded\"));\n              var p = a(o.arrow);\n\n              if (p.length > 0 && l.showTopLevelArrows) {\n                p.removeClass();\n\n                if (o.openVerticalDirection == \"down\") {\n                  p.addClass(l.toThemeProperty(\"jqx-menu-item-arrow-down\"));\n                  p.addClass(l.toThemeProperty(\"jqx-icon-arrow-down\"));\n                } else {\n                  p.addClass(l.toThemeProperty(\"jqx-menu-item-arrow-up\"));\n                  p.addClass(l.toThemeProperty(\"jqx-icon-arrow-up\"));\n                }\n              }\n\n              a.jqx.aria(a(o.element), \"aria-expanded\", false);\n              k.css({\n                display: \"none\"\n              });\n\n              if (l.animationHideDuration == 0) {\n                j.css({\n                  top: m\n                });\n              }\n\n              l._raiseEvent(\"1\", o);\n            });\n          } else {\n            if (!a.jqx.browser.msie) {}\n\n            j.stop().animate({\n              left: e\n            }, l.animationHideDuration, function () {\n              if (l.animationHideDuration == 0) {\n                j.css({\n                  left: e\n                });\n              }\n\n              if (o.level > 0) {\n                a(o.element).removeClass(l.toThemeProperty(\"jqx-fill-state-pressed\"));\n                a(o.element).removeClass(l.toThemeProperty(\"jqx-menu-item-selected\"));\n                var p = a(o.arrow);\n\n                if (p.length > 0) {\n                  p.removeClass();\n\n                  if (o.openHorizontalDirection != \"left\") {\n                    p.addClass(l.toThemeProperty(\"jqx-menu-item-arrow-\" + l._getDir(\"right\")));\n                    p.addClass(l.toThemeProperty(\"jqx-icon-arrow-\" + l._getDir(\"right\")));\n                  } else {\n                    p.addClass(l.toThemeProperty(\"jqx-menu-item-arrow-\" + l._getDir(\"left\")));\n                    p.addClass(l.toThemeProperty(\"jqx-icon-arrow-\" + l._getDir(\"left\")));\n                  }\n                }\n              } else {\n                a(o.element).removeClass(l.toThemeProperty(\"jqx-fill-state-pressed\"));\n                a(o.element).removeClass(l.toThemeProperty(\"jqx-menu-item-top-selected\"));\n                var p = a(o.arrow);\n\n                if (p.length > 0) {\n                  p.removeClass();\n\n                  if (o.openHorizontalDirection != \"left\") {\n                    p.addClass(l.toThemeProperty(\"jqx-menu-item-arrow-top-\" + l._getDir(\"right\")));\n                    p.addClass(l.toThemeProperty(\"jqx-icon-arrow-\" + l._getDir(\"right\")));\n                  } else {\n                    p.addClass(l.toThemeProperty(\"jqx-menu-item-arrow-top-\" + l._getDir(\"left\")));\n                    p.addClass(l.toThemeProperty(\"jqx-icon-arrow-\" + l._getDir(\"left\")));\n                  }\n                }\n              }\n\n              a.jqx.aria(a(o.element), \"aria-expanded\", false);\n              k.css({\n                display: \"none\"\n              });\n\n              l._raiseEvent(\"1\", o);\n            });\n          }\n        };\n\n        if (h > 0) {\n          if (j.data(\"timer\")) {\n            j.data(\"timer\").hide = setTimeout(function () {\n              n();\n            }, h);\n          }\n        } else {\n          n();\n        }\n\n        if (g != undefined && g) {\n          var d = j.children();\n          a.each(d, function () {\n            if (l.menuElements[this.id] && l.menuElements[this.id].isOpen) {\n              var p = a(l.menuElements[this.id].subMenuElement);\n\n              l._closeItem(l, l.menuElements[this.id], true, true);\n            }\n          });\n        }\n      }\n    },\n    getSubItems: function (i, h) {\n      if (i == null) {\n        return false;\n      }\n\n      var g = this;\n      var c = new Array();\n\n      if (h != null) {\n        a.extend(c, h);\n      }\n\n      var d = i;\n      var f = this.menuElements[d];\n      var b = a(f.subMenuElement);\n      var e = b.find(\".jqx-menu-item\");\n      a.each(e, function () {\n        c[this.id] = g.menuElements[this.id];\n        var j = g.getSubItems(this.id, c);\n        a.extend(c, j);\n      });\n      return c;\n    },\n    disable: function (g, d) {\n      if (g == null) {\n        return;\n      }\n\n      var c = g;\n      var f = this;\n\n      if (this.menuElements[c]) {\n        var e = this.menuElements[c];\n        e.disabled = d;\n        var b = a(e.element);\n        e.element.disabled = d;\n        a.each(b.children(), function () {\n          this.disabled = d;\n        });\n\n        if (d) {\n          b.addClass(f.toThemeProperty(\"jqx-menu-item-disabled\"));\n          b.addClass(f.toThemeProperty(\"jqx-fill-state-disabled\"));\n        } else {\n          b.removeClass(f.toThemeProperty(\"jqx-menu-item-disabled\"));\n          b.removeClass(f.toThemeProperty(\"jqx-fill-state-disabled\"));\n        }\n      }\n    },\n    getItem: function (c) {\n      if (this.menuElements[c]) {\n        var b = this.menuElements[c];\n        return b;\n      }\n\n      return null;\n    },\n    disableItem: function (b) {\n      this.disable(b, true);\n    },\n    hideItem: function (c) {\n      if (this.menuElements[c]) {\n        var b = this.menuElements[c];\n        a(b.element).hide();\n      }\n    },\n    showItem: function (c) {\n      if (this.menuElements[c]) {\n        var b = this.menuElements[c];\n        a(b.element).show();\n      }\n    },\n    enableItem: function (b) {\n      this.disable(b, false);\n    },\n    _setItemProperty: function (g, c, f) {\n      if (g == null) {\n        return;\n      }\n\n      var b = g;\n      var e = this;\n\n      if (this.menuElements[b]) {\n        var d = this.menuElements[b];\n\n        if (d[c]) {\n          d[c] = f;\n        }\n      }\n    },\n    setItemOpenDirection: function (d, c, e) {\n      if (d == null) {\n        return;\n      }\n\n      var j = d;\n      var g = this;\n      var f = a.jqx.browser.msie && a.jqx.browser.version < 8;\n\n      if (this.menuElements[j]) {\n        var i = this.menuElements[j];\n\n        if (c != null) {\n          i.openHorizontalDirection = c;\n\n          if (i.hasItems && i.level > 0) {\n            var h = a(i.element);\n\n            if (h != undefined) {\n              var b = a(i.arrow);\n\n              if (i.arrow == null) {\n                b = a('<span id=\"arrow' + h[0].id + '\"></span>');\n\n                if (!f) {\n                  b.prependTo(h);\n                } else {\n                  b.appendTo(h);\n                }\n\n                i.arrow = b[0];\n              }\n\n              b.removeClass();\n\n              if (i.openHorizontalDirection == \"left\") {\n                b.addClass(g.toThemeProperty(\"jqx-menu-item-arrow-\" + g._getDir(\"left\")));\n                b.addClass(g.toThemeProperty(\"jqx-icon-arrow-\" + g._getDir(\"left\")));\n              } else {\n                b.addClass(g.toThemeProperty(\"jqx-menu-item-arrow-\" + g._getDir(\"right\")));\n                b.addClass(g.toThemeProperty(\"jqx-icon-arrow-\" + g._getDir(\"right\")));\n              }\n\n              b.css(\"visibility\", \"inherit\");\n\n              if (!f) {\n                b.css(\"display\", \"block\");\n                b.css(\"float\", \"right\");\n              } else {\n                b.css(\"display\", \"inline-block\");\n                b.css(\"float\", \"none\");\n              }\n            }\n          }\n        }\n\n        if (e != null) {\n          i.openVerticalDirection = e;\n          var b = a(i.arrow);\n          var h = a(i.element);\n\n          if (!g.showTopLevelArrows) {\n            return;\n          }\n\n          if (h != undefined) {\n            if (i.arrow == null) {\n              b = a('<span id=\"arrow' + h[0].id + '\"></span>');\n\n              if (!f) {\n                b.prependTo(h);\n              } else {\n                b.appendTo(h);\n              }\n\n              i.arrow = b[0];\n            }\n\n            b.removeClass();\n\n            if (i.openVerticalDirection == \"down\") {\n              b.addClass(g.toThemeProperty(\"jqx-menu-item-arrow-down\"));\n              b.addClass(g.toThemeProperty(\"jqx-icon-arrow-down\"));\n            } else {\n              b.addClass(g.toThemeProperty(\"jqx-menu-item-arrow-up\"));\n              b.addClass(g.toThemeProperty(\"jqx-icon-arrow-up\"));\n            }\n\n            b.css(\"visibility\", \"inherit\");\n\n            if (!f) {\n              b.css(\"display\", \"block\");\n              b.css(\"float\", \"right\");\n            } else {\n              b.css(\"display\", \"inline-block\");\n              b.css(\"float\", \"none\");\n            }\n          }\n        }\n      }\n    },\n    _getSiblings: function (d) {\n      var e = new Array();\n      var b = 0;\n\n      for (var c = 0; c < this.items.length; c++) {\n        if (this.items[c] == d) {\n          continue;\n        }\n\n        if (this.items[c].parentId == d.parentId && this.items[c].hasItems) {\n          e[b++] = this.items[c];\n        }\n      }\n\n      return e;\n    },\n    _openItem: function (s, r, q) {\n      if (s == null || r == null) {\n        return false;\n      }\n\n      if (r.isOpen) {\n        return false;\n      }\n\n      if (r.disabled) {\n        return false;\n      }\n\n      if (s.disabled) {\n        return false;\n      }\n\n      var l = s.popupZIndex;\n\n      if (q != undefined) {\n        l = q;\n      }\n\n      var e = s.animationHideDuration;\n      s.animationHideDuration = 0;\n\n      s._closeItem(s, r, true, true);\n\n      s.animationHideDuration = e;\n      a(r.element).focus();\n      var f = [5, 5];\n      var t = a(r.subMenuElement);\n\n      if (t != null) {\n        t.stop();\n      }\n\n      if (t.data(\"timer\") && t.data(\"timer\").hide != null) {\n        clearTimeout(t.data(\"timer\").hide);\n      }\n\n      var o = t.closest(\"div.jqx-menu-popup\");\n      var h = a(r.element);\n      var i = r.level == 0 ? this._getOffset(r.element) : h.position();\n\n      if (r.level > 0 && this.hasTransform) {\n        var p = parseInt(h.coord().top) - parseInt(this._getOffset(r.element).top);\n        i.top += p;\n      }\n\n      if (r.level == 0 && this.mode == \"popup\") {\n        i = h.coord();\n      }\n\n      var j = r.level == 0 && this.mode == \"horizontal\";\n      var b = j ? i.left : this.menuElements[r.parentId] != null && this.menuElements[r.parentId].subMenuElement != null ? parseInt(a(a(this.menuElements[r.parentId].subMenuElement).closest(\"div.jqx-menu-popup\")).outerWidth()) - f[0] : parseInt(t.outerWidth());\n      o.css({\n        visibility: \"visible\",\n        display: \"block\",\n        left: b,\n        top: j ? i.top + h.outerHeight() : i.top,\n        zIndex: l\n      });\n      t.css(\"display\", \"block\");\n\n      if (this.mode != \"horizontal\" && r.level == 0) {\n        var d = this._getOffset(this.element);\n\n        o.css(\"left\", -1 + d.left + this.host.outerWidth());\n        t.css(\"left\", -t.outerWidth());\n      } else {\n        var c = this._getClosedSubMenuOffset(r);\n\n        t.css(\"left\", c.left);\n        t.css(\"top\", c.top);\n      }\n\n      o.css({\n        height: parseInt(t.outerHeight()) + parseInt(f[1]) + \"px\"\n      });\n      var n = 0;\n      var g = 0;\n\n      switch (r.openVerticalDirection) {\n        case \"up\":\n          if (j) {\n            t.css(\"top\", t.outerHeight());\n            n = f[1];\n            var k = parseInt(t.parent().css(\"padding-bottom\"));\n\n            if (isNaN(k)) {\n              k = 0;\n            }\n\n            if (k > 0) {\n              o.addClass(this.toThemeProperty(\"jqx-menu-popup-clear\"));\n            }\n\n            t.css(\"top\", t.outerHeight() - k);\n            o.css({\n              display: \"block\",\n              top: i.top - o.outerHeight(),\n              zIndex: l\n            });\n          } else {\n            n = f[1];\n            t.css(\"top\", t.outerHeight());\n            o.css({\n              display: \"block\",\n              top: i.top - o.outerHeight() + f[1] + h.outerHeight(),\n              zIndex: l\n            });\n          }\n\n          break;\n\n        case \"center\":\n          if (j) {\n            t.css(\"top\", 0);\n            o.css({\n              display: \"block\",\n              top: i.top - o.outerHeight() / 2 + f[1],\n              zIndex: l\n            });\n          } else {\n            t.css(\"top\", 0);\n            o.css({\n              display: \"block\",\n              top: i.top + h.outerHeight() / 2 - o.outerHeight() / 2 + f[1],\n              zIndex: l\n            });\n          }\n\n          break;\n      }\n\n      switch (r.openHorizontalDirection) {\n        case this._getDir(\"left\"):\n          if (j) {\n            o.css({\n              left: i.left - (o.outerWidth() - h.outerWidth() - f[0])\n            });\n          } else {\n            g = 0;\n            t.css(\"left\", o.outerWidth());\n            o.css({\n              left: i.left - o.outerWidth() + 2 * r.level\n            });\n          }\n\n          break;\n\n        case \"center\":\n          if (j) {\n            o.css({\n              left: i.left - (o.outerWidth() / 2 - h.outerWidth() / 2 - f[0] / 2)\n            });\n          } else {\n            o.css({\n              left: i.left - (o.outerWidth() / 2 - h.outerWidth() / 2 - f[0] / 2)\n            });\n            t.css(\"left\", o.outerWidth());\n          }\n\n          break;\n      }\n\n      if (j) {\n        if (parseInt(t.css(\"top\")) == n) {\n          r.isOpen = true;\n          return;\n        }\n      } else {\n        if (parseInt(t.css(\"left\")) == g) {\n          r.isOpen == true;\n          return;\n        }\n      }\n\n      a.each(s._getSiblings(r), function () {\n        s._closeItem(s, this, true, true);\n      });\n      var m = a.data(s.element, \"animationHideDelay\");\n      s.animationHideDelay = m;\n\n      if (this.autoCloseInterval > 0) {\n        if (this.host.data(\"autoclose\") != null && this.host.data(\"autoclose\").close != null) {\n          clearTimeout(this.host.data(\"autoclose\").close);\n        }\n\n        if (this.host.data(\"autoclose\") != null) {\n          this.host.data(\"autoclose\").close = setTimeout(function () {\n            s._closeAll();\n          }, this.autoCloseInterval);\n        }\n      }\n\n      if (t.data(\"timer\")) {\n        t.data(\"timer\").show = setTimeout(function () {\n          if (o != null) {\n            if (j) {\n              t.stop();\n              t.css(\"left\", g);\n\n              if (!a.jqx.browser.msie) {}\n\n              h.addClass(s.toThemeProperty(\"jqx-fill-state-pressed\"));\n              h.addClass(s.toThemeProperty(\"jqx-menu-item-top-selected\"));\n\n              if (r.openVerticalDirection == \"down\") {\n                a(r.element).addClass(s.toThemeProperty(\"jqx-rc-b-expanded\"));\n                o.addClass(s.toThemeProperty(\"jqx-rc-t-expanded\"));\n              } else {\n                a(r.element).addClass(s.toThemeProperty(\"jqx-rc-t-expanded\"));\n                o.addClass(s.toThemeProperty(\"jqx-rc-b-expanded\"));\n              }\n\n              var u = a(r.arrow);\n\n              if (u.length > 0 && s.showTopLevelArrows) {\n                u.removeClass();\n\n                if (r.openVerticalDirection == \"down\") {\n                  u.addClass(s.toThemeProperty(\"jqx-menu-item-arrow-down-selected\"));\n                  u.addClass(s.toThemeProperty(\"jqx-icon-arrow-down\"));\n                } else {\n                  u.addClass(s.toThemeProperty(\"jqx-menu-item-arrow-up-selected\"));\n                  u.addClass(s.toThemeProperty(\"jqx-icon-arrow-up\"));\n                }\n              }\n\n              if (s.animationShowDuration == 0) {\n                t.css({\n                  top: n\n                });\n                r.isOpen = true;\n\n                s._raiseEvent(\"0\", r);\n\n                a.jqx.aria(a(r.element), \"aria-expanded\", true);\n              } else {\n                t.animate({\n                  top: n\n                }, s.animationShowDuration, s.easing, function () {\n                  r.isOpen = true;\n                  a.jqx.aria(a(r.element), \"aria-expanded\", true);\n\n                  s._raiseEvent(\"0\", r);\n                });\n              }\n            } else {\n              t.stop();\n              t.css(\"top\", n);\n\n              if (!a.jqx.browser.msie) {}\n\n              if (r.level > 0) {\n                h.addClass(s.toThemeProperty(\"jqx-fill-state-pressed\"));\n                h.addClass(s.toThemeProperty(\"jqx-menu-item-selected\"));\n                var u = a(r.arrow);\n\n                if (u.length > 0) {\n                  u.removeClass();\n\n                  if (r.openHorizontalDirection != \"left\") {\n                    u.addClass(s.toThemeProperty(\"jqx-menu-item-arrow-\" + s._getDir(\"right\") + \"-selected\"));\n                    u.addClass(s.toThemeProperty(\"jqx-icon-arrow-\" + s._getDir(\"right\")));\n                  } else {\n                    u.addClass(s.toThemeProperty(\"jqx-menu-item-arrow-\" + s._getDir(\"left\") + \"-selected\"));\n                    u.addClass(s.toThemeProperty(\"jqx-icon-arrow-\" + s._getDir(\"left\")));\n                  }\n                }\n              } else {\n                h.addClass(s.toThemeProperty(\"jqx-fill-state-pressed\"));\n                h.addClass(s.toThemeProperty(\"jqx-menu-item-top-selected\"));\n                var u = a(r.arrow);\n\n                if (u.length > 0) {\n                  u.removeClass();\n\n                  if (r.openHorizontalDirection != \"left\") {\n                    u.addClass(s.toThemeProperty(\"jqx-menu-item-arrow-\" + s._getDir(\"right\") + \"-selected\"));\n                    u.addClass(s.toThemeProperty(\"jqx-icon-arrow-\" + s._getDir(\"right\")));\n                  } else {\n                    u.addClass(s.toThemeProperty(\"jqx-menu-item-arrow-\" + s._getDir(\"left\") + \"-selected\"));\n                    u.addClass(s.toThemeProperty(\"jqx-icon-arrow-\" + s._getDir(\"left\")));\n                  }\n                }\n              }\n\n              if (!a.jqx.browser.msie) {}\n\n              if (s.animationShowDuration == 0) {\n                t.css({\n                  left: g\n                });\n\n                s._raiseEvent(\"0\", r);\n\n                r.isOpen = true;\n                a.jqx.aria(a(r.element), \"aria-expanded\", true);\n              } else {\n                t.animate({\n                  left: g\n                }, s.animationShowDuration, s.easing, function () {\n                  s._raiseEvent(\"0\", r);\n\n                  r.isOpen = true;\n                  a.jqx.aria(a(r.element), \"aria-expanded\", true);\n                });\n              }\n            }\n          }\n        }, this.animationShowDelay);\n      }\n    },\n    _getDir: function (b) {\n      switch (b) {\n        case \"left\":\n          return !this.rtl ? \"left\" : \"right\";\n\n        case \"right\":\n          return this.rtl ? \"left\" : \"right\";\n      }\n\n      return \"left\";\n    },\n    _applyOrientation: function (i, d) {\n      var g = this;\n      var f = 0;\n      g.host.removeClass(g.toThemeProperty(\"jqx-menu-horizontal\"));\n      g.host.removeClass(g.toThemeProperty(\"jqx-menu-vertical\"));\n      g.host.removeClass(g.toThemeProperty(\"jqx-menu\"));\n      g.host.removeClass(g.toThemeProperty(\"jqx-widget\"));\n      g.host.addClass(g.toThemeProperty(\"jqx-widget\"));\n      g.host.addClass(g.toThemeProperty(\"jqx-menu\"));\n\n      if (i != undefined && d != undefined && d == \"popup\") {\n        if (g.host.parent().length > 0 && g.host.parent().parent().length > 0 && g.host.parent().parent()[0] == document.body) {\n          var h = a.data(document.body, \"jqxMenuOldHost\" + g.element.id);\n\n          if (h != null) {\n            var e = g.host.closest(\"div.jqx-menu-wrapper\");\n            e.remove();\n            e.appendTo(h);\n            g.host.css(\"display\", \"block\");\n            g.host.css(\"visibility\", \"visible\");\n            e.css(\"display\", \"block\");\n            e.css(\"visibility\", \"visible\");\n          }\n        }\n      } else {\n        if (i == undefined && d == undefined) {\n          a.data(document.body, \"jqxMenuOldHost\" + g.element.id, g.host.parent()[0]);\n        }\n      }\n\n      if (g.autoOpenPopup) {\n        if (g.mode == \"popup\") {\n          g.addHandler(a(document), \"contextmenu.\" + g.element.id, function (j) {\n            return false;\n          });\n          g.addHandler(a(document), \"mousedown.menu\" + g.element.id, function (j) {\n            g._openContextMenu(j);\n          });\n        } else {\n          g.removeHandler(a(document), \"contextmenu.\" + g.element.id);\n          g.removeHandler(a(document), \"mousedown.menu\" + g.element.id);\n        }\n      } else {\n        g.removeHandler(a(document), \"contextmenu.\" + g.element.id);\n        g.removeHandler(a(document), \"mousedown.menu\" + g.element.id);\n        g.addHandler(a(document), \"contextmenu.\" + g.element.id, function (j) {\n          if (j.target && j.target.className.indexOf && j.target.className.indexOf(\"jqx-menu\") >= 0) {\n            return false;\n          }\n        });\n      }\n\n      if (g.rtl) {\n        g.host.addClass(g.toThemeProperty(\"jqx-rtl\"));\n      }\n\n      switch (g.mode) {\n        case \"horizontal\":\n          g.host.addClass(g.toThemeProperty(\"jqx-widget-header\"));\n          g.host.addClass(g.toThemeProperty(\"jqx-menu-horizontal\"));\n          a.each(g.items, function () {\n            var m = this;\n            var k = a(m.element);\n            var l = a(m.arrow);\n            l.removeClass();\n\n            if (m.hasItems && m.level > 0) {\n              var l = a('<span style=\"border: none; background-color: transparent;\" id=\"arrow' + k[0].id + '\"></span>');\n              l.prependTo(k);\n              l.css(\"float\", g._getDir(\"right\"));\n              l.addClass(g.toThemeProperty(\"jqx-menu-item-arrow-\" + g._getDir(\"right\")));\n              l.addClass(g.toThemeProperty(\"jqx-icon-arrow-\" + g._getDir(\"right\")));\n              m.arrow = l[0];\n            }\n\n            if (m.level == 0) {\n              a(m.element).css(\"float\", g._getDir(\"left\"));\n\n              if (!m.ignoretheme && m.hasItems && g.showTopLevelArrows) {\n                var l = a('<span style=\"border: none; background-color: transparent;\" id=\"arrow' + k[0].id + '\"></span>');\n                var j = a.jqx.browser.msie && a.jqx.browser.version < 8;\n\n                if (m.arrow == null) {\n                  if (!j) {\n                    l.prependTo(k);\n                  } else {\n                    l.appendTo(k);\n                  }\n                } else {\n                  l = a(m.arrow);\n                }\n\n                if (m.openVerticalDirection == \"down\") {\n                  l.addClass(g.toThemeProperty(\"jqx-menu-item-arrow-down\"));\n                  l.addClass(g.toThemeProperty(\"jqx-icon-arrow-down\"));\n                } else {\n                  l.addClass(g.toThemeProperty(\"jqx-menu-item-arrow-up\"));\n                  l.addClass(g.toThemeProperty(\"jqx-icon-arrow-up\"));\n                }\n\n                l.css(\"visibility\", \"inherit\");\n\n                if (!j) {\n                  l.css(\"display\", \"block\");\n                  l.css(\"float\", \"right\");\n                } else {\n                  l.css(\"display\", \"inline-block\");\n                }\n\n                m.arrow = l[0];\n              } else {\n                if (!m.ignoretheme && m.hasItems && !g.showTopLevelArrows) {\n                  if (m.arrow != null) {\n                    var l = a(m.arrow);\n                    l.remove();\n                    m.arrow = null;\n                  }\n                }\n              }\n\n              f = Math.max(f, k.height());\n            }\n          });\n          break;\n\n        case \"vertical\":\n        case \"popup\":\n        case \"simple\":\n          g.host.addClass(g.toThemeProperty(\"jqx-menu-vertical\"));\n          a.each(g.items, function () {\n            var l = this;\n            var j = a(l.element);\n\n            if (l.hasItems && !l.ignoretheme) {\n              if (l.arrow) {\n                a(l.arrow).remove();\n              }\n\n              if (g.mode == \"simple\") {\n                return true;\n              }\n\n              var k = a('<span style=\"border: none; background-color: transparent;\" id=\"arrow' + j[0].id + '\"></span>');\n              k.prependTo(j);\n              k.css(\"float\", \"right\");\n\n              if (l.level == 0) {\n                k.addClass(g.toThemeProperty(\"jqx-menu-item-arrow-top-\" + g._getDir(\"right\")));\n                k.addClass(g.toThemeProperty(\"jqx-icon-arrow-\" + g._getDir(\"right\")));\n              } else {\n                k.addClass(g.toThemeProperty(\"jqx-menu-item-arrow-\" + g._getDir(\"right\")));\n                k.addClass(g.toThemeProperty(\"jqx-icon-arrow-\" + g._getDir(\"right\")));\n              }\n\n              l.arrow = k[0];\n            }\n\n            j.css(\"float\", \"none\");\n          });\n\n          if (g.mode == \"popup\") {\n            g.host.addClass(g.toThemeProperty(\"jqx-widget-content\"));\n            g.host.wrap('<div tabindex=0 class=\"jqx-menu-wrapper\" style=\"z-index:' + g.popupZIndex + '; border: none; background-color: transparent; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: visible;\"></div>');\n            var e = g.host.closest(\"div.jqx-menu-wrapper\");\n            g.host.addClass(g.toThemeProperty(\"jqx-popup\"));\n            e[0].id = \"menuWrapper\" + g.element.id;\n            e.appendTo(a(document.body));\n            g.addHandler(e, \"keydown\", function (j) {\n              return g.handleKeyDown(j);\n            });\n          } else {\n            g.host.addClass(g.toThemeProperty(\"jqx-widget-header\"));\n          }\n\n          if (g.mode == \"popup\") {\n            var b = g.host.height();\n            g.host.css(\"position\", \"absolute\");\n            g.host.css(\"top\", \"0\");\n            g.host.css(\"left\", \"0\");\n\n            if (g.mode != \"simple\") {\n              g.host.height(b);\n              g.host.css(\"display\", \"none\");\n            }\n          }\n\n          break;\n      }\n\n      var c = g.isTouchDevice();\n\n      if (g.autoCloseOnClick) {\n        g.removeHandler(a(document), \"mousedown.menu\" + g.element.id, g._closeAfterClick);\n        g.addHandler(a(document), \"mousedown.menu\" + g.element.id, g._closeAfterClick, g);\n\n        if (c) {\n          g.removeHandler(a(document), a.jqx.mobile.getTouchEventName(\"touchstart\") + \".menu\" + g.element.id, g._closeAfterClick, g);\n          g.addHandler(a(document), a.jqx.mobile.getTouchEventName(\"touchstart\") + \".menu\" + g.element.id, g._closeAfterClick, g);\n        }\n      }\n    },\n    _getBodyOffset: function () {\n      var c = 0;\n      var b = 0;\n\n      if (a(\"body\").css(\"border-top-width\") != \"0px\") {\n        c = parseInt(a(\"body\").css(\"border-top-width\"));\n\n        if (isNaN(c)) {\n          c = 0;\n        }\n      }\n\n      if (a(\"body\").css(\"border-left-width\") != \"0px\") {\n        b = parseInt(a(\"body\").css(\"border-left-width\"));\n\n        if (isNaN(b)) {\n          b = 0;\n        }\n      }\n\n      return {\n        left: b,\n        top: c\n      };\n    },\n    _getOffset: function (c) {\n      var e = a.jqx.mobile.isSafariMobileBrowser();\n      var i = a(c).coord(true);\n      var h = i.top;\n      var g = i.left;\n\n      if (a(\"body\").css(\"border-top-width\") != \"0px\") {\n        h = parseInt(h) + this._getBodyOffset().top;\n      }\n\n      if (a(\"body\").css(\"border-left-width\") != \"0px\") {\n        g = parseInt(g) + this._getBodyOffset().left;\n      }\n\n      var d = a.jqx.mobile.isWindowsPhone();\n      var f = a.jqx.mobile.isTouchDevice();\n\n      if (this.hasTransform || e != null && e || d || f) {\n        var b = {\n          left: a.jqx.mobile.getLeftPos(c),\n          top: a.jqx.mobile.getTopPos(c)\n        };\n        return b;\n      } else {\n        return {\n          left: g,\n          top: h\n        };\n      }\n    },\n    _isRightClick: function (c) {\n      var b;\n\n      if (!c) {\n        var c = window.event;\n      }\n\n      if (c.which) {\n        b = c.which == 3;\n      } else {\n        if (c.button) {\n          b = c.button == 2;\n        }\n      }\n\n      return b;\n    },\n    _openContextMenu: function (d) {\n      var c = this;\n\n      var b = c._isRightClick(d);\n\n      if (b) {\n        c.open(parseInt(d.clientX) + 5, parseInt(d.clientY) + 5);\n      }\n    },\n    close: function () {\n      var c = this;\n      var d = a.data(this.element, \"contextMenuOpened\" + this.element.id);\n\n      if (d) {\n        var b = this.host;\n        a.each(c.items, function () {\n          var e = this;\n\n          if (e.hasItems) {\n            c._closeItem(c, e);\n          }\n        });\n        a.each(c.items, function () {\n          var f = this;\n\n          if (f.isOpen == true) {\n            var e = a(f.subMenuElement);\n            var g = e.closest(\"div.jqx-menu-popup\");\n            g.hide(this.animationHideDuration);\n          }\n        });\n        this.host.hide(this.animationHideDuration);\n        a.data(c.element, \"contextMenuOpened\" + this.element.id, false);\n\n        c._raiseEvent(\"1\", c);\n\n        c._raiseEvent(\"5\");\n      }\n    },\n    open: function (e, d) {\n      if (this.mode == \"popup\") {\n        var c = 0;\n\n        if (this.host.css(\"display\") == \"block\") {\n          this.close();\n          c = this.animationHideDuration;\n        }\n\n        var b = this;\n\n        if (e == undefined || e == null) {\n          e = 0;\n        }\n\n        if (d == undefined || d == null) {\n          d = 0;\n        }\n\n        setTimeout(function () {\n          b.host.show(b.animationShowDuration);\n          b.host.css(\"visibility\", \"visible\");\n          a.data(b.element, \"contextMenuOpened\" + b.element.id, true);\n\n          b._raiseEvent(\"0\", b);\n\n          b._raiseEvent(\"4\", {\n            left: e,\n            top: d\n          });\n\n          b.host.css(\"z-index\", b.popupZIndex);\n\n          if (e != undefined && d != undefined) {\n            b.host.css({\n              left: e,\n              top: d\n            });\n          }\n\n          b.focus();\n        }, c);\n      }\n    },\n    _renderHover: function (c, e, b) {\n      var d = this;\n\n      if (!e.ignoretheme) {\n        this.addHandler(c, \"mouseenter\", function () {\n          d.hoveredItem = e;\n\n          if (!e.disabled && !e.separator && d.enableHover && !d.disabled) {\n            if (e.level > 0) {\n              c.addClass(d.toThemeProperty(\"jqx-fill-state-hover\"));\n              c.addClass(d.toThemeProperty(\"jqx-menu-item-hover\"));\n            } else {\n              c.addClass(d.toThemeProperty(\"jqx-fill-state-hover\"));\n              c.addClass(d.toThemeProperty(\"jqx-menu-item-top-hover\"));\n            }\n          }\n        });\n        this.addHandler(c, \"mouseleave\", function () {\n          if (!e.disabled && !e.separator && d.enableHover && !d.disabled) {\n            if (e.level > 0) {\n              c.removeClass(d.toThemeProperty(\"jqx-fill-state-hover\"));\n              c.removeClass(d.toThemeProperty(\"jqx-menu-item-hover\"));\n            } else {\n              c.removeClass(d.toThemeProperty(\"jqx-fill-state-hover\"));\n              c.removeClass(d.toThemeProperty(\"jqx-menu-item-top-hover\"));\n            }\n          }\n        });\n      }\n    },\n    _closeAfterClick: function (c) {\n      var b = c != null ? c.data : this;\n      var d = false;\n\n      if (b.autoCloseOnClick) {\n        a.each(a(c.target).parents(), function () {\n          if (this.className.indexOf) {\n            if (this.className.indexOf(\"jqx-menu\") != -1) {\n              d = true;\n              return false;\n            }\n          }\n        });\n\n        if (!d) {\n          c.data = b;\n\n          b._closeAll(c);\n        }\n      }\n    },\n    _autoSizeHorizontalMenuItems: function () {\n      var c = this;\n\n      if (c.autoSizeMainItems && this.mode == \"horizontal\") {\n        var b = this.maxHeight;\n\n        if (parseInt(b) > parseInt(this.host.height())) {\n          b = parseInt(this.host.height());\n        }\n\n        b = parseInt(this.host.height());\n        a.each(this.items, function () {\n          var m = this;\n          var j = a(m.element);\n\n          if (m.level == 0 && b > 0) {\n            var d = j.children().length > 0 ? parseInt(j.children().height()) : j.height();\n            var g = c.host.find(\"ul:first\");\n            var h = parseInt(g.css(\"padding-top\"));\n            var n = parseInt(g.css(\"margin-top\"));\n            var k = b - 2 * (n + h);\n            var i = parseInt(k) / 2 - d / 2;\n            var e = parseInt(i);\n            var l = parseInt(i);\n            j.css(\"padding-top\", e);\n            j.css(\"padding-bottom\", l);\n\n            if (parseInt(j.outerHeight()) > k) {\n              var f = 1;\n              j.css(\"padding-top\", e - f);\n              e = e - f;\n            }\n          }\n        });\n      }\n\n      a.each(this.items, function () {\n        var g = this;\n        var e = a(g.element);\n\n        if (g.hasItems && g.level > 0) {\n          if (g.arrow) {\n            var f = a(g.arrow);\n            var d = a(g.element).height();\n\n            if (d > 15) {\n              f.css(\"margin-top\", (d - 15) / 2);\n            }\n          }\n        }\n      });\n    },\n    _nextVisibleItem: function (c, d) {\n      if (c == null || c == undefined) {\n        return null;\n      }\n\n      var b = c;\n\n      while (b != null) {\n        b = b.nextItem;\n\n        if (this._isVisible(b) && !b.disabled && b.type !== \"separator\") {\n          if (this.minimized) {\n            return b;\n          }\n\n          if (d != undefined) {\n            if (b && b.level != d) {\n              continue;\n            }\n          }\n\n          return b;\n        }\n      }\n\n      return null;\n    },\n    _prevVisibleItem: function (c, d) {\n      if (c == null || c == undefined) {\n        return null;\n      }\n\n      var b = c;\n\n      while (b != null) {\n        b = b.prevItem;\n\n        if (this._isVisible(b) && !b.disabled && b.type !== \"separator\") {\n          if (this.minimized) {\n            return b;\n          }\n\n          if (d != undefined) {\n            if (b && b.level != d) {\n              continue;\n            }\n          }\n\n          return b;\n        }\n      }\n\n      return null;\n    },\n    _parentItem: function (d) {\n      if (d == null || d == undefined) {\n        return null;\n      }\n\n      var c = d.parentElement;\n\n      if (!c) {\n        return null;\n      }\n\n      var b = null;\n      a.each(this.items, function () {\n        if (this.element == c) {\n          b = this;\n          return false;\n        }\n      });\n      return b;\n    },\n    _isElementVisible: function (b) {\n      if (b == null) {\n        return false;\n      }\n\n      if (a(b).css(\"display\") != \"none\" && a(b).css(\"visibility\") != \"hidden\") {\n        return true;\n      }\n\n      return false;\n    },\n    _isVisible: function (c) {\n      if (c == null || c == undefined) {\n        return false;\n      }\n\n      if (!this._isElementVisible(c.element)) {\n        return false;\n      }\n\n      var b = this._parentItem(c);\n\n      if (b == null) {\n        return true;\n      }\n\n      if (this.minimized) {\n        return true;\n      }\n\n      if (b != null) {\n        if (!this._isElementVisible(b.element)) {\n          return false;\n        }\n\n        if (b.isOpen || this.minimized) {\n          while (b != null) {\n            b = this._parentItem(b);\n\n            if (b != null && !this._isElementVisible(b.element)) {\n              return false;\n            }\n\n            if (b != null && !b.isOpen) {\n              return false;\n            }\n          }\n        } else {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    _render: function (f, g) {\n      if (this.disabled) {\n        this.host.addClass(this.toThemeProperty(\"jqx-fill-state-disabled\"));\n        this.host.addClass(this.toThemeProperty(\"jqx-menu-disabled\"));\n      }\n\n      if (this.host.attr(\"tabindex\") == undefined) {\n        this.host.attr(\"tabindex\", 0);\n      }\n\n      var i = this.popupZIndex;\n      var d = [5, 5];\n      var h = this;\n      a.data(h.element, \"animationHideDelay\", h.animationHideDelay);\n      var e = this.isTouchDevice();\n      var c = e && (a.jqx.mobile.isWindowsPhone() || navigator.userAgent.indexOf(\"Touch\") >= 0);\n      var j = false;\n\n      if (navigator.platform.toLowerCase().indexOf(\"win\") != -1) {\n        if (navigator.userAgent.indexOf(\"Windows Phone\") >= 0 || navigator.userAgent.indexOf(\"WPDesktop\") >= 0 || navigator.userAgent.indexOf(\"IEMobile\") >= 0 || navigator.userAgent.indexOf(\"ZuneWP7\") >= 0) {\n          this.touchDevice = true;\n        } else {\n          if (navigator.userAgent.indexOf(\"Touch\") >= 0) {\n            var b = \"MSPointerDown\" in window;\n\n            if (b || a.jqx.mobile.isWindowsPhone() || navigator.userAgent.indexOf(\"ARM\") >= 0) {\n              j = true;\n              c = true;\n              h.clickToOpen = true;\n              h.autoCloseOnClick = false;\n              h.enableHover = false;\n            }\n          }\n        }\n      }\n\n      a.data(document.body, \"menuel\", this);\n      this.hasTransform = a.jqx.utilities.hasTransform(this.host);\n\n      this._applyOrientation(f, g);\n\n      this.removeHandler(this.host, \"blur\");\n      this.removeHandler(this.host, \"focus\");\n      this.addHandler(this.host, \"blur\", function (k) {\n        if (h.keyboardNavigation) {\n          if (h.activeItem) {\n            if (h.mode === \"popup\") {\n              if (document.activeElement && document.activeElement.className.indexOf(\"jqx-menu-wrapper\") >= 0) {\n                return;\n              }\n            }\n\n            a(h.activeItem.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n            h.activeItem = null;\n          }\n        }\n      });\n      this.addHandler(this.host, \"focus\", function (k) {\n        if (h.keyboardNavigation) {\n          if (!h.activeItem) {\n            if (h.hoveredItem) {\n              a(h.hoveredItem.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n              h.activeItem = h.hoveredItem;\n            } else {\n              var l = function () {\n                if (!a.jqx.isHidden(a(h.items[0].element))) {\n                  a(h.items[0].element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  h.activeItem = h.items[0];\n                } else {\n                  var m = h._nextVisibleItem(h.items[0], 0);\n\n                  if (m) {\n                    a(m.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                    h.activeItem = m;\n                  }\n                }\n              };\n\n              if (!h.activeItem) {\n                l();\n              } else {\n                if (!a.jqx.isHidden(a(h.activeItem.element))) {\n                  a(h.activeItem.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                } else {\n                  a(h.activeItem.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  l();\n                }\n              }\n            }\n          }\n        }\n      });\n      this.removeHandler(this.host, \"keydown.menu\" + this.element.id);\n\n      h.handleKeyDown = function (k) {\n        if (h.keyboardNavigation) {\n          if (k.target.nodeName.toLowerCase() === \"input\") {\n            return true;\n          }\n\n          var q = null;\n          var o = null;\n          a.each(h.items, function () {\n            var A = this;\n\n            if (this.disabled) {\n              return true;\n            }\n\n            if (this.element.className.indexOf(\"pressed\") >= 0) {\n              o = this;\n            }\n\n            if (this.element.className.indexOf(\"focus\") >= 0) {\n              q = this;\n              return false;\n            }\n          });\n\n          if (!q && o) {\n            q = o;\n            return false;\n          }\n\n          if (!q) {\n            a(h.items[0].element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n            h.activeItem = h.items[0];\n            q = h.activeItem;\n            return false;\n          }\n\n          var t = false;\n\n          if (k.keyCode == 27) {\n            k.data = h;\n\n            h._closeAll(k);\n\n            if (q) {\n              var z = q;\n\n              while (z != null) {\n                if (z.parentItem) {\n                  z = z.parentItem;\n                } else {\n                  a(h.activeItem.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  h.activeItem = z;\n                  a(h.activeItem.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  z = z.parentItem;\n                }\n              }\n            }\n\n            t = true;\n          }\n\n          if (k.keyCode == 13) {\n            if (q) {\n              t = true;\n\n              h._raiseEvent(\"2\", {\n                item: q.element,\n                event: k,\n                type: \"keyboard\"\n              });\n\n              var r = q.anchor != null ? a(q.anchor) : null;\n\n              if (r != null && r.length > 0) {\n                var l = r.attr(\"href\");\n                var u = r.attr(\"target\");\n\n                if (l != null) {\n                  if (u != null) {\n                    window.open(l, u);\n                  } else {\n                    window.location = l;\n                  }\n                }\n              }\n\n              k.preventDefault();\n              k.stopPropagation();\n              a(q.element).focus();\n            }\n          }\n\n          var n = function (D) {\n            if (D == null) {\n              return new Array();\n            }\n\n            var C = new Array();\n            var A = 0;\n\n            for (var B = 0; B < h.items.length; B++) {\n              if (h.items[B].parentId == D.parentId) {\n                C[A++] = h.items[B];\n              }\n            }\n\n            return C;\n          };\n\n          var v = \"\";\n\n          switch (k.keyCode) {\n            case 40:\n              v = \"down\";\n              break;\n\n            case 38:\n              v = \"up\";\n              break;\n\n            case 39:\n              v = \"right\";\n              break;\n\n            case 37:\n              v = \"left\";\n              break;\n          }\n\n          if (q && q.openHorizontalDirection === \"left\" && v === \"left\") {\n            v = \"right\";\n          }\n\n          if (q && q.openHorizontalDirection === \"left\" && v === \"right\") {\n            v = \"left\";\n          }\n\n          if (q && q.openVerticalDirection === \"top\" && v === \"top\") {\n            v = \"bottom\";\n          }\n\n          if (q && q.openVerticalDirection === \"top\" && v === \"bottom\") {\n            v = \"top\";\n          }\n\n          if (h.rtl) {\n            if (v === \"right\") {\n              v = \"left\";\n            } else {\n              if (v === \"left\") {\n                v = \"right\";\n              }\n            }\n          }\n\n          if (v === \"right\" && !h.minimized) {\n            if (k.altKey && (q.level != 0 && q.hasItems || h.mode != \"horizontal\")) {\n              h._openItem(h, q);\n            } else {\n              var x = h._nextVisibleItem(q, 0);\n\n              var m = h._nextVisibleItem(q);\n\n              var w = n(m);\n\n              if (!x) {\n                x = m;\n              }\n\n              if (x && (x.parentId === q.parentId && x.level == 0 && h.mode == \"horizontal\" || m.id == w[0].id && m.level != 0)) {\n                if (m.id == w[0].id && (q.level != 0 || q.level == 0 && h.mode != \"horizontal\")) {\n                  x = m;\n                }\n\n                a(x.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                h.activeItem = x;\n              }\n            }\n\n            k.preventDefault();\n            k.stopPropagation();\n          }\n\n          if (v === \"left\" && !h.minimized) {\n            if (k.altKey && (q.level != 0 && h.mode !== \"horizontal\" || q.level > 1 && h.mode === \"horizontal\" || q.level == 1 && q.hasItems && h.mode === \"horizontal\")) {\n              if (q.hasItems) {\n                h._closeItem(h, q);\n              } else {\n                if (q.parentItem) {\n                  h._closeItem(h, q.parentItem);\n\n                  a(q.parentItem.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  h.activeItem = q.parentItem;\n                }\n              }\n            } else {\n              var x = h._prevVisibleItem(q, 0);\n\n              var y = q.parentItem;\n\n              if (x && x.parentId === q.parentId && x.level == 0 && h.mode == \"horizontal\") {\n                a(x.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                h.activeItem = x;\n              } else {\n                if (!(y && y.level == 0 && h.mode == \"horizontal\") && y && y.level == q.level - 1) {\n                  a(y.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  h.activeItem = y;\n                }\n              }\n            }\n\n            k.preventDefault();\n            k.stopPropagation();\n          }\n\n          if (v === \"down\") {\n            if (k.altKey) {\n              if (q.level == 0 && q.hasItems) {\n                h._openItem(h, q);\n              }\n\n              if (h.minimized) {\n                if (h.minimizedHidden) {\n                  h.minimizedItem.trigger(\"click\");\n                }\n              }\n            } else {\n              var x = h._nextVisibleItem(q, q.level);\n\n              var w = n(x);\n\n              if (h.minimized && x) {\n                a(x.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                h.activeItem = x;\n              } else {\n                if (x && (x.parentId === q.parentId || x.id == w[0].id && h.mode == \"horizontal\")) {\n                  if (!(x.level == 0 && h.mode == \"horizontal\")) {\n                    a(x.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                    a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                    h.activeItem = x;\n                  }\n                }\n\n                if (h.mode === \"horizontal\" && q.level === 0 && q.isOpen && q.hasItems) {\n                  var x = h._nextVisibleItem(q);\n\n                  a(x.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  h.activeItem = x;\n                }\n              }\n            }\n\n            k.preventDefault();\n            k.stopPropagation();\n          } else {\n            if (v === \"up\") {\n              if (k.altKey) {\n                if (q.parentItem && q.parentItem.level == 0) {\n                  h._closeItem(h, q.parentItem);\n\n                  a(q.parentItem.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  h.activeItem = q.parentItem;\n                } else {\n                  if (q.parentItem === null && q.level === 0 && h.mode === \"horizontal\") {\n                    h._closeItem(h, q);\n                  }\n                }\n\n                if (h.minimized) {\n                  if (!h.minimizedHidden) {\n                    h.minimizedItem.trigger(\"click\");\n                  }\n                }\n              } else {\n                var x = h._prevVisibleItem(q, q.level);\n\n                var w = n(q);\n\n                if (h.minimized && x) {\n                  a(x.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  h.activeItem = x;\n                } else {\n                  if (x && (x.parentId === q.parentId || x.id == q.parentId && x.level == 0 && h.mode == \"horizontal\")) {\n                    if (!(x.level == 0 && h.mode === \"horizontal\" && q.level === 0)) {\n                      a(x.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                      a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                      h.activeItem = x;\n                    }\n                  } else {\n                    if (q && q.id == w[0].id && q.parentItem && q.parentItem.level === 0 && h.mode === \"horizontal\") {\n                      var x = q.parentItem;\n                      a(x.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                      a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                      h.activeItem = x;\n                    }\n                  }\n                }\n              }\n\n              k.preventDefault();\n              k.stopPropagation();\n            }\n          }\n\n          if (k.keyCode == 9) {\n            var x = k.shiftKey ? h._prevVisibleItem(q) : h._nextVisibleItem(q);\n\n            if (x) {\n              a(x.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n              a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n              h.activeItem = x;\n              k.preventDefault();\n              k.stopPropagation();\n            } else {\n              if (h.lockFocus) {\n                var w = new Array();\n                var s = 0;\n\n                for (var p = 0; p < h.items.length; p++) {\n                  if (h.items[p] == q) {\n                    continue;\n                  }\n\n                  if (h.items[p].parentId == q.parentId) {\n                    w[s++] = h.items[p];\n                  }\n                }\n\n                if (w.length > 0) {\n                  if (k.shiftKey) {\n                    a(w[w.length - 1].element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                    h.activeItem = w[w.length - 1];\n                  } else {\n                    a(w[0].element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                    h.activeItem = w[0];\n                  }\n\n                  a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                }\n\n                k.preventDefault();\n                k.stopPropagation();\n              } else {\n                if (q) {\n                  a(q.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n                  h.activeItem = null;\n                }\n              }\n            }\n          }\n        } else {\n          return true;\n        }\n      };\n\n      this.addHandler(this.host, \"keydown.menu\" + this.element.id, function (k) {\n        h.handleKeyDown(k);\n      });\n\n      if (h.enableRoundedCorners) {\n        this.host.addClass(h.toThemeProperty(\"jqx-rc-all\"));\n      }\n\n      a.each(this.items, function () {\n        var r = this;\n        var n = a(r.element);\n        n.attr(\"role\", \"menuitem\");\n\n        if (h.enableRoundedCorners) {\n          n.addClass(h.toThemeProperty(\"jqx-rc-all\"));\n        }\n\n        h.removeHandler(n, \"click\");\n        h.addHandler(n, \"click\", function (w) {\n          if (r.disabled) {\n            return;\n          }\n\n          if (h.disabled) {\n            return;\n          }\n\n          if (h.keyboardNavigation) {\n            if (h.activeItem) {\n              a(h.activeItem.element).removeClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n            }\n\n            h.activeItem = r;\n            a(r.element).addClass(h.toThemeProperty(\"jqx-fill-state-focus\"));\n\n            if (h.minimized) {\n              w.stopPropagation();\n            }\n          }\n\n          h._raiseEvent(\"2\", {\n            type: \"mouse\",\n            item: r.element,\n            event: w\n          });\n\n          if (!h.autoOpen) {\n            if (r.level > 0) {\n              if (h.autoCloseOnClick && !e && !h.clickToOpen) {\n                w.data = h;\n\n                h._closeAll(w);\n              }\n            }\n          } else {\n            if (h.autoCloseOnClick && !e && !h.clickToOpen) {\n              if (r.closeOnClick) {\n                w.data = h;\n\n                h._closeAll(w);\n              }\n            }\n          }\n\n          if (e && h.autoCloseOnClick) {\n            w.data = h;\n\n            if (!r.hasItems) {\n              h._closeAll(w);\n            }\n          }\n\n          if (w.target.tagName != \"A\" && w.target.tagName != \"a\") {\n            var u = r.anchor != null ? a(r.anchor) : null;\n\n            if (u != null && u.length > 0) {\n              var t = u.attr(\"href\");\n              var v = u.attr(\"target\");\n\n              if (t != null) {\n                if (v != null) {\n                  window.open(t, v);\n                } else {\n                  window.location = t;\n                }\n              }\n            }\n          }\n        });\n        h.removeHandler(n, \"mouseenter\");\n        h.removeHandler(n, \"mouseleave\");\n\n        if (!c && h.mode != \"simple\") {\n          h._renderHover(n, r, e);\n        }\n\n        if (r.subMenuElement != null) {\n          var o = a(r.subMenuElement);\n\n          if (h.mode == \"simple\") {\n            o.show();\n            return true;\n          }\n\n          o.wrap('<div class=\"jqx-menu-popup ' + h.toThemeProperty(\"jqx-menu-popup\") + '\" style=\"border: none; background-color: transparent; z-index:' + i + '; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: hidden;\"><div style=\"background-color: transparent; border: none; position:absolute; overflow:hidden; left: 0; top: 0; right: 0; width: 100%; height: 100%;\"></div></div>');\n          o.css({\n            overflow: \"hidden\",\n            position: \"absolute\",\n            left: 0,\n            display: \"inherit\",\n            top: -o.outerHeight()\n          });\n          o.data(\"timer\", {});\n\n          if (r.level > 0) {\n            o.css(\"left\", -o.outerWidth());\n          } else {\n            if (h.mode == \"horizontal\") {\n              o.css(\"left\", 0);\n            }\n          }\n\n          i++;\n          var q = a(r.subMenuElement).closest(\"div.jqx-menu-popup\").css({\n            width: parseInt(a(r.subMenuElement).outerWidth()) + parseInt(d[0]) + \"px\",\n            height: parseInt(a(r.subMenuElement).outerHeight()) + parseInt(d[1]) + \"px\"\n          });\n          var s = n.closest(\"div.jqx-menu-popup\");\n\n          if (s.length > 0) {\n            var k = o.css(\"margin-left\");\n            var m = o.css(\"margin-right\");\n            var l = o.css(\"padding-left\");\n            var p = o.css(\"padding-right\");\n            q.appendTo(s);\n            o.css(\"margin-left\", k);\n            o.css(\"margin-right\", m);\n            o.css(\"padding-left\", l);\n            o.css(\"padding-right\", p);\n          } else {\n            var k = o.css(\"margin-left\");\n            var m = o.css(\"margin-right\");\n            var l = o.css(\"padding-left\");\n            var p = o.css(\"padding-right\");\n            q.appendTo(a(document.body));\n            o.css(\"margin-left\", k);\n            o.css(\"margin-right\", m);\n            o.css(\"padding-left\", l);\n            o.css(\"padding-right\", p);\n          }\n\n          if (!h.clickToOpen) {\n            if (e || c) {\n              h.removeHandler(n, a.jqx.mobile.getTouchEventName(\"touchstart\"));\n              h.addHandler(n, a.jqx.mobile.getTouchEventName(\"touchstart\"), function (t) {\n                clearTimeout(o.data(\"timer\").hide);\n\n                if (o != null) {\n                  o.stop();\n                }\n\n                if (r.level == 0 && !r.isOpen && h.mode != \"popup\") {\n                  t.data = h;\n\n                  h._closeAll(t);\n                }\n\n                if (!r.isOpen) {\n                  h._openItem(h, r);\n                } else {\n                  h._closeItem(h, r, true);\n                }\n\n                return false;\n              });\n            }\n\n            if (!c) {\n              h.addHandler(n, \"mouseenter\", function () {\n                if (h.autoOpen || r.level > 0 && !h.autoOpen) {\n                  clearTimeout(o.data(\"timer\").hide);\n                }\n\n                if (r.parentId && r.parentId != 0) {\n                  if (h.menuElements[r.parentId]) {\n                    var t = h.menuElements[r.parentId].isOpen;\n\n                    if (!t) {\n                      return;\n                    }\n                  }\n                }\n\n                if (h.autoOpen || r.level > 0 && !h.autoOpen) {\n                  h._openItem(h, r);\n                }\n\n                return false;\n              });\n              h.addHandler(n, \"mousedown\", function () {\n                if (!h.autoOpen && r.level == 0) {\n                  clearTimeout(o.data(\"timer\").hide);\n\n                  if (o != null) {\n                    o.stop();\n                  }\n\n                  if (!r.isOpen) {\n                    h._openItem(h, r);\n                  } else {\n                    h._closeItem(h, r, true);\n                  }\n                }\n              });\n              h.addHandler(n, \"mouseleave\", function (u) {\n                if (h.autoCloseOnMouseLeave) {\n                  clearTimeout(o.data(\"timer\").hide);\n                  var x = a(r.subMenuElement);\n                  var t = {\n                    left: parseInt(u.pageX),\n                    top: parseInt(u.pageY)\n                  };\n                  var w = {\n                    left: parseInt(x.coord().left),\n                    top: parseInt(x.coord().top),\n                    width: parseInt(x.outerWidth()),\n                    height: parseInt(x.outerHeight())\n                  };\n                  var v = true;\n\n                  if (w.left - 5 <= t.left && t.left <= w.left + w.width + 5) {\n                    if (w.top <= t.top && t.top <= w.top + w.height) {\n                      v = false;\n                    }\n                  }\n\n                  if (v) {\n                    h._closeItem(h, r, true);\n                  }\n                }\n              });\n              h.removeHandler(q, \"mouseenter\");\n              h.addHandler(q, \"mouseenter\", function () {\n                clearTimeout(o.data(\"timer\").hide);\n              });\n              h.removeHandler(q, \"mouseleave\");\n              h.addHandler(q, \"mouseleave\", function (t) {\n                if (h.autoCloseOnMouseLeave) {\n                  clearTimeout(o.data(\"timer\").hide);\n                  clearTimeout(o.data(\"timer\").show);\n\n                  if (o != null) {\n                    o.stop();\n                  }\n\n                  h._closeItem(h, r, true);\n                }\n              });\n            }\n          } else {\n            h.removeHandler(n, \"mousedown\");\n            h.addHandler(n, \"mousedown\", function (t) {\n              clearTimeout(o.data(\"timer\").hide);\n\n              if (o != null) {\n                o.stop();\n              }\n\n              if (r.level == 0 && !r.isOpen) {\n                t.data = h;\n\n                h._closeAll(t);\n              }\n\n              if (!r.isOpen) {\n                h._openItem(h, r);\n              } else {\n                h._closeItem(h, r, true);\n              }\n            });\n          }\n        }\n      });\n\n      if (this.mode == \"simple\") {\n        this._renderSimpleMode();\n      }\n\n      this._autoSizeHorizontalMenuItems();\n\n      this._raiseEvent(\"3\", this);\n    },\n    _renderSimpleMode: function () {\n      this.host.show();\n    },\n    createID: function () {\n      var b = Math.random() + \"\";\n      b = b.replace(\".\", \"\");\n      b = \"99\" + b;\n      b = b / 1;\n\n      while (this.items[b]) {\n        b = Math.random() + \"\";\n        b = b.replace(\".\", \"\");\n        b = b / 1;\n      }\n\n      return \"menuItem\" + b;\n    },\n    _createMenu: function (c, f) {\n      if (c == null) {\n        return;\n      }\n\n      if (f == undefined) {\n        f = true;\n      }\n\n      if (f == null) {\n        f = true;\n      }\n\n      var o = this;\n      a(c).addClass(\"jqx-menu-ul\");\n      var u = a(c).find(\"li\");\n      var q = 0;\n      this.itemMapping = new Array();\n\n      for (var j = 0; j < u.length; j++) {\n        var m = u[j];\n        var s = a(m);\n\n        if (m.className.indexOf(\"jqx-menu\") == -1 && this.autoGenerate == false) {\n          continue;\n        }\n\n        var p = m.id;\n\n        if (!p) {\n          p = this.createID();\n        }\n\n        if (f) {\n          m.id = p;\n          this.items[q] = new a.jqx._jqxMenu.jqxMenuItem();\n          this.menuElements[p] = this.items[q];\n        }\n\n        q += 1;\n        var t = 0;\n        var x = this;\n        var h = s.children();\n        h.each(function () {\n          if (!f) {\n            this.className = \"\";\n\n            if (x.autoGenerate) {\n              a(x.items[q - 1].subMenuElement)[0].className = \"\";\n\n              if (!x.minimized) {\n                a(x.items[q - 1].subMenuElement).addClass(x.toThemeProperty(\"jqx-widget-content\"));\n              }\n\n              a(x.items[q - 1].subMenuElement).addClass(x.toThemeProperty(\"jqx-menu-dropdown\"));\n              a(x.items[q - 1].subMenuElement).addClass(x.toThemeProperty(\"jqx-popup\"));\n            }\n          }\n\n          if (this.className.indexOf(\"jqx-menu-dropdown\") != -1) {\n            if (f) {\n              x.items[q - 1].subMenuElement = this;\n            }\n\n            return false;\n          } else {\n            if (x.autoGenerate && (this.tagName == \"ul\" || this.tagName == \"UL\")) {\n              if (f) {\n                x.items[q - 1].subMenuElement = this;\n              }\n\n              this.className = \"\";\n\n              if (!x.minimized) {\n                a(this).addClass(x.toThemeProperty(\"jqx-widget-content\"));\n              }\n\n              a(this).addClass(x.toThemeProperty(\"jqx-menu-dropdown\"));\n              a(this).addClass(x.toThemeProperty(\"jqx-popup\"));\n              a(this).attr(\"role\", \"menu\");\n\n              if (x.rtl) {\n                a(this).addClass(x.toThemeProperty(\"jqx-rc-l\"));\n              } else {\n                a(this).addClass(x.toThemeProperty(\"jqx-rc-r\"));\n              }\n\n              a(this).addClass(x.toThemeProperty(\"jqx-rc-b\"));\n              return false;\n            }\n          }\n        });\n        var w = s.parents();\n        w.each(function () {\n          if (this.className.indexOf(\"jqx-menu-item\") != -1) {\n            t = this.id;\n            return false;\n          } else {\n            if (x.autoGenerate && (this.tagName == \"li\" || this.tagName == \"LI\")) {\n              t = this.id;\n              return false;\n            }\n          }\n        });\n        var e = false;\n        var d = m.getAttribute(\"type\");\n        var b = m.getAttribute(\"ignoretheme\") || m.getAttribute(\"data-ignoretheme\");\n\n        if (b) {\n          if (b == \"true\" || b == true) {\n            b = true;\n          }\n        } else {\n          b = false;\n        }\n\n        if (!d) {\n          d = m.type;\n        } else {\n          if (d == \"separator\") {\n            var e = true;\n          }\n        }\n\n        if (!e) {\n          if (t) {\n            d = \"sub\";\n          } else {\n            d = \"top\";\n          }\n        }\n\n        var g = this.items[q - 1];\n\n        if (f) {\n          g.id = p;\n          g.parentId = t;\n          g.type = d;\n          g.separator = e;\n          g.element = u[j];\n          var l = s.children(\"a\");\n          g.disabled = m.getAttribute(\"item-disabled\") == \"true\" ? true : false;\n          g.level = s.parents(\"li\").length;\n          g.anchor = l.length > 0 ? l : null;\n\n          if (g.anchor) {\n            a(g.anchor).attr(\"tabindex\", -1);\n          }\n        }\n\n        g.ignoretheme = b;\n        var n = this.menuElements[t];\n\n        if (n != null) {\n          if (n.ignoretheme) {\n            g.ignoretheme = n.ignoretheme;\n            b = n.ignoretheme;\n          }\n\n          g.parentItem = n;\n          g.parentElement = n.element;\n        }\n\n        if (this.autoGenerate) {\n          if (d == \"separator\") {\n            s.removeClass();\n            s.addClass(this.toThemeProperty(\"jqx-menu-item-separator\"));\n            s.attr(\"role\", \"separator\");\n          } else {\n            if (!b) {\n              if (s[0].className.indexOf(\"jqx-grid-menu-item-touch\") >= 0) {\n                s[0].className = this.toThemeProperty(\"jqx-grid-menu-item-touch\");\n              } else {\n                s[0].className = \"\";\n              }\n\n              if (this.rtl) {\n                s.addClass(this.toThemeProperty(\"jqx-rtl\"));\n              }\n\n              if (g.level > 0 && !x.minimized) {\n                s.addClass(this.toThemeProperty(\"jqx-item\"));\n                s.addClass(this.toThemeProperty(\"jqx-menu-item\"));\n              } else {\n                s.addClass(this.toThemeProperty(\"jqx-item\"));\n                s.addClass(this.toThemeProperty(\"jqx-menu-item-top\"));\n              }\n            }\n          }\n        }\n\n        if (g.disabled) {\n          s.addClass(x.toThemeProperty(\"jqx-menu-item-disabled\"));\n          s.addClass(x.toThemeProperty(\"jqx-fill-state-disabled\"));\n        }\n\n        this.itemMapping[j] = {\n          element: u[j],\n          item: g\n        };\n        this.itemMapping[\"id\" + u[j].id] = this.itemMapping[j];\n\n        if (f && !b) {\n          g.hasItems = s.find(\"li\").length > 0;\n\n          if (g.hasItems) {\n            if (g.element) {\n              a.jqx.aria(a(g.element), \"aria-haspopup\", true);\n\n              if (!g.subMenuElement.id) {\n                g.subMenuElement.id = a.jqx.utilities.createId();\n              }\n\n              a.jqx.aria(a(g.element), \"aria-owns\", g.subMenuElement.id);\n            }\n          }\n        }\n      }\n\n      for (var r = 0; r < u.length; r++) {\n        var v = u[r];\n\n        if (this.itemMapping[\"id\" + v.id]) {\n          var g = this.itemMapping[\"id\" + v.id].item;\n\n          if (!g) {\n            continue;\n          }\n\n          g.prevItem = null;\n          g.nextItem = null;\n\n          if (r > 0) {\n            if (this.itemMapping[\"id\" + u[r - 1].id]) {\n              g.prevItem = this.itemMapping[\"id\" + u[r - 1].id].item;\n            }\n          }\n\n          if (r < u.length - 1) {\n            if (this.itemMapping[\"id\" + u[r + 1].id]) {\n              g.nextItem = this.itemMapping[\"id\" + u[r + 1].id].item;\n            }\n          }\n        }\n      }\n    },\n    destroy: function () {\n      var b = this;\n      a.jqx.utilities.resize(b.host, null, true);\n      var d = b.host.closest(\"div.jqx-menu-wrapper\");\n      b.removeHandler(d, \"keydown\");\n      d.remove();\n      b.removeHandler(a(\"#menuWrapper\" + b.element.id), \"keydown\");\n      a(\"#menuWrapper\" + b.element.id).remove();\n      b.removeHandler(b.host, \"keydown\");\n      b.removeHandler(b.host, \"focus\");\n      b.removeHandler(b.host, \"blur\");\n      b.removeHandler(a(document), \"mousedown.menu\" + b.element.id, b._closeAfterClick);\n      b.removeHandler(a(document), \"mouseup.menu\" + b.element.id, b._closeAfterClick);\n      b.removeHandler(a(document), \"contextmenu.\" + b.element.id);\n      b.removeHandler(b.host, \"contextmenu.\" + b.element.id);\n      a.data(document.body, \"jqxMenuOldHost\" + b.element.id, null);\n\n      if (b.isTouchDevice()) {\n        b.removeHandler(a(document), a.jqx.mobile.getTouchEventName(\"touchstart\") + \".menu\" + b.element.id, b._closeAfterClick, this);\n      }\n\n      if (a(window).off) {\n        a(window).off(\"resize.menu\" + b.element.id);\n      }\n\n      a.each(b.items, function () {\n        var g = this;\n        var f = a(g.element);\n        b.removeHandler(f, \"click\");\n        b.removeHandler(f, \"selectstart\");\n        b.removeHandler(f, \"mouseenter\");\n        b.removeHandler(f, \"mouseleave\");\n        b.removeHandler(f, \"mousedown\");\n        b.removeHandler(f, \"mouseleave\");\n        var e = a(g.subMenuElement);\n        var h = e.closest(\"div.jqx-menu-popup\");\n        h.remove();\n        delete this.subMenuElement;\n        delete this.element;\n      });\n      a.data(document.body, \"menuel\", null);\n      delete b.menuElements;\n      b.items = new Array();\n      delete b.items;\n      var c = a.data(b.element, \"jqxMenu\");\n\n      if (c) {\n        delete c.instance;\n      }\n\n      b.host.removeClass();\n      b.host.remove();\n      delete b.host;\n      delete b.element;\n    },\n    _raiseEvent: function (g, c) {\n      if (c == undefined) {\n        c = {\n          owner: null\n        };\n      }\n\n      var d = this.events[g];\n      var e = c;\n      e.owner = this;\n      var f = new a.Event(d);\n\n      if (g == \"2\") {\n        e = c.item;\n        e.owner = this;\n        e.clickType = c.type;\n        a.extend(f, c.event);\n        f.type = \"itemclick\";\n      }\n\n      f.owner = this;\n      f.args = e;\n      var b = this.host.trigger(f);\n      return b;\n    },\n    propertiesChangedHandler: function (b, c, e) {\n      if (e.width && e.height && Object.keys(e).length == 2) {\n        b._setSize();\n\n        if (b.mode === \"popup\") {\n          var d = this.host.closest(\"div.jqx-menu-wrapper\");\n          d[c](e);\n          var f = this.host[0].id;\n          a(\"#\" + f)[c](e);\n        }\n      }\n    },\n    propertyChangedHandler: function (b, d, h, g) {\n      if (this.isInitialized == undefined || this.isInitialized == false) {\n        return;\n      }\n\n      if (b.batchUpdate && b.batchUpdate.width && b.batchUpdate.height && Object.keys(b.batchUpdate).length == 2) {\n        return;\n      }\n\n      if (d == \"disabled\") {\n        if (b.disabled) {\n          b.host.addClass(b.toThemeProperty(\"jqx-fill-state-disabled\"));\n          b.host.addClass(b.toThemeProperty(\"jqx-menu-disabled\"));\n        } else {\n          b.host.removeClass(b.toThemeProperty(\"jqx-fill-state-disabled\"));\n          b.host.removeClass(b.toThemeProperty(\"jqx-menu-disabled\"));\n        }\n      }\n\n      if (g == h) {\n        return;\n      }\n\n      if (d == \"touchMode\") {\n        this._isTouchDevice = null;\n\n        b._render(g, h);\n      }\n\n      if (d === \"width\" || d === \"height\") {\n        b._setSize();\n\n        if (b.mode === \"popup\") {\n          var e = this.host.closest(\"div.jqx-menu-wrapper\");\n          e[d](g);\n          var i = this.host[0].id;\n          a(\"#\" + i)[d](g);\n        }\n\n        return;\n      }\n\n      if (d == \"source\") {\n        if (b.source != null) {\n          var c = b.loadItems(b.source);\n          b.element.innerHTML = c;\n          var f = b.host.find(\"ul:first\");\n\n          if (f.length > 0) {\n            b.refresh();\n\n            b._createMenu(f[0]);\n\n            b._render();\n          }\n        }\n      }\n\n      if (d == \"autoCloseOnClick\") {\n        if (g == false) {\n          b.removeHandler(a(document), \"mousedown.menu\" + this.element.id, b._closeAll);\n        } else {\n          b.addHandler(a(document), \"mousedown.menu\" + this.element.id, b, b._closeAll);\n        }\n      } else {\n        if (d == \"mode\" || d == \"width\" || d == \"height\" || d == \"showTopLevelArrows\") {\n          b.refresh();\n\n          if (d == \"mode\") {\n            b._render(g, h);\n          } else {\n            b._applyOrientation();\n          }\n        } else {\n          if (d == \"theme\") {\n            a.jqx.utilities.setTheme(h, g, b.host);\n          }\n        }\n      }\n    }\n  });\n})(jqxBaseFramework);\n\n(function (a) {\n  a.jqx._jqxMenu.jqxMenuItem = function (e, d, c) {\n    var b = {\n      id: e,\n      parentId: d,\n      parentItem: null,\n      anchor: null,\n      type: c,\n      disabled: false,\n      level: 0,\n      isOpen: false,\n      hasItems: false,\n      element: null,\n      subMenuElement: null,\n      arrow: null,\n      openHorizontalDirection: \"right\",\n      openVerticalDirection: \"down\",\n      closeOnClick: true\n    };\n    return b;\n  };\n})(jqxBaseFramework);","map":null,"metadata":{},"sourceType":"script"}